<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <title>Welcome to the CryptoScreener !</title>
	<link rel="stylesheet" type="text/css" href="./libs/styleScreener.css">
	<script type="text/javascript" src="./libs/initScreener.js"></script>
	<script type="text/javascript" src="./libs/configScreener.js"></script>
	<script type="text/javascript" src="./libs/web3.min.js"></script>
	<script type="text/javascript" src="./libs/libsScreener.js"></script>
	<script type="text/javascript" src="./libs/walletsScreener.js"></script>
	<!-- <script type="text/javascript" src="./libs/human_standard_token_abi.js"></script> -->
	<script type="text/javascript">
		if(infura_KEY != "") {
			window.addEventListener('load', function () {
				if (typeof web3 !== 'undefined') {
				console.log('Web3 Detected! ' + web3.currentProvider.constructor.name)
				window.web3 = new Web3(web3.currentProvider);
				} else {
				console.log('No Web3 Detected... using HTTP Provider')
				window.web3 = new Web3(new Web3.providers.HttpProvider("https://mainnet.infura.io/"+infura_KEY));
				}
			})
		}
	</script>
</head>
<body>
	<div id="header" class="inline">
		<div class="column">Market Cap: <span id="gl_MC"></span> <span id="curr_symb1"></span></div>
		<div class="column">24h Volume: <span id="gl_Vol"></span> <span id="curr_symb2"></span></div>
		<div class="column">BTC Dominance: <span id="gl_BTCdom"></span> %</div>
		<div class="column">Balance: <span id="wallet_Balance"></span> <span id="curr_symb3"></span> |
			<select id="currencyChoice" onchange="choiceCurrency(this.value)">
				<option selected="selected" value="EUR">EUR</option>
				<option value="USD">USD</option>
				<option value="BTC">BTC</option>
				<option value="ETH">ETH</option>
				<option value="NEO">NEO</option>
			</select>
		</div>
		<div class="column">
			<span id="lastupdate" class="dateheure"></span> |
			1d:<input id="oneDayGraph" name="OneDay" value="oneday" type="checkbox" onchange="changeDayGraph(this)" /><!-- |
			7d:<input id="sevenDayGraph" name="SevenDays" value="sevenday"type="checkbox" onchange="changeDayGraph(this)" /> | -->
<!--			@<input id="onlineMode" name="onlineMode" value="true"type="checkbox" onchange="changeOnlineMode(this)" /> -->
		</div>
	</div>
	<div id="dvTableCoins"></div>
	<hr/>
	<div id="dvTableTokens"></div>
	<hr/>
	<!-- <input type="button" value="Refresh Table" onclick="refreshTables()" />
	<button type="button" onClick="getBalance();">Get Balance</button> -->
	<div id="output"></div>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script>
	var table = $("#mytable");
	var currency = $("#currencyChoice").val();
	var currencySym = "€";
	var decimals = 5;
	
	$(document).ready(startApp());

	function startApp() {
		initScreenerConfiguration();
		
		console.log("Online Mode: "+configScreener.onlineMode);
		if(configScreener.onlineMode) {
			lstAllTokensCMC = loadCMC_Tokens();
			loadWallet_online();
		}
		else {
			lstAllTokensCMC = readCMC_Tokens();
		}

		GenerateCoinsInfos();
		
		if(configScreener.localWallet) {
			readTokensWalletFile(configScreener.walletName);
		}
		
		// Charge les infos du marché Global de CoinMarketCap (CCC)
		info_CoinMarketCap_Global();

		if(configScreener.onlineMode) {
			//////////////////////////////////////////////////////////////////
			// MODE ON LINE /////////////////////////////////////////////////
			generateTable(lstCoins, "dvTableCoins");
			generateTable(lstTokens, "dvTableTokens");
			var newCells = GenerateTokensInfos();
			//////////////////////////////////////////////////////////////////
		}
		else {
			//////////////////////////////////////////////////////////////////
			// MODE OFF LINE /////////////////////////////////////////////////
			generateTable_offline(smallListCoins, "dvTableCoins");
			GenerateCoinsInfos_offline();
			generateTable_offline(smallListTokens, "dvTableTokens");
			GenerateTokensInfos_offline();
			//////////////////////////////////////////////////////////////////
		}
		
		$("#wallet_Balance").html(walletBalance.toFixed(2));
		$("#oneDayGraph").prop('checked', true);
	}

	function changeOnlineMode(choice) {
		if(choice.value == "true") {
			if(choice.checked) {
				configScreener.onlineMode = true;
				localStorage.setItem('cs_configuration', JSON.stringify(configScreener));
			}
			else {
				configScreener.onlineMode = false;
				localStorage.setItem('cs_configuration', JSON.stringify(configScreener));
			}
			refreshTables();
		}
	}
	
	function readTokensWalletFile(walletFile) {
		var listAllTokens = [];
		$.ajax({
			type: "GET",
			url: walletFile,
			dataType: "text",
			async: false,
			success: function(data) { 
				listAllTokens = processData(data);
				var tokenName;
				$.each(listAllTokens, function(key, values) {
					$.each(values, function(header, value) {
						var splitLine = value.split(":");
						if(splitLine[0] == "Token") {
							tokenName = splitLine[1];
							if(tokenName.indexOf('(') > -1) {
								tokenName = tokenName.substring(0, tokenName.indexOf('('));
							}
							var nbTokens = values[6].split(":");
							var contractAddress = values[9].split(":");
							if((lstAllTokensCMC.filter(p => p.symbol == tokenName)).length > 0) {
								var indexToken = lstAllTokensCMC.findIndex(p => p.symbol == tokenName);
								var token = lstAllTokensCMC.filter(p => p.symbol == tokenName);
								if((token[0].id).toUpperCase() == "ETHEREUM") {
									lstCoins.push([(token[0].id).toUpperCase(), "coinmarketcap", indexToken + 1, "", parseFloat(nbTokens[1]), ""]);
								}
								else {
									if(!exceptTokens.includes()) {
										lstTokens.push([(token[0].id).toUpperCase(), "coinmarketcap", indexToken + 1, "", parseFloat(nbTokens[1]), ""]);
									}
								}
								if((!exceptContract.includes(contractAddress[1])) && (!exceptTokens.includes(token[0].symbol))) {
									if(contractAddress[1] != "Not a token") {
										lstGoodTokens[token[0].rank] = [token[0].id, token[0].symbol, token[0].rank, token[0].price_btc, token[0]["percent_change_24h"], token[0].market_cap_usd, token[0]["24h_volume_usd"], parseFloat(nbTokens[1]), token[0].name, token[0].price_usd, token[0].price_eur, contractAddress[1]] ;
										smallListTokens.push([(token[0].id).toUpperCase(), parseInt(token[0].rank)]);
									}
									else {
										lstGoodCoins[token[0].rank] = [token[0].id, token[0].symbol, token[0].rank, token[0].price_btc, token[0]["percent_change_24h"], token[0].market_cap_usd, token[0]["24h_volume_usd"], parseFloat(nbTokens[1]), token[0].name, token[0].price_usd, token[0].price_eur, contractAddress[1]] ;
										smallListCoins.push([(token[0].id).toUpperCase(), parseInt(token[0].rank)]);
									}
									// console.log(token);
								}
							}
							else {
								unkTokens.push([tokenName, tokenName, 0, 0, 0, 0, 0, contractAddress[1]]);
							}
						}
					});
				});
			}
		});
		smallListCoins.sort(function(a,b){
			return a[1] - b[1];
		});
		smallListTokens.sort(function(a,b){
			return a[1] - b[1];
		});
	}

	function filter_TokensWalletFileCMC() {
		$.each(listAllTokens, function(key, value) {
			var priceToken = 0;
			var tokenSymbol = value[0];
			
			for(var i = 0; i < lstAllTokensCMC.length; i++)
			{
				if(lstAllTokensCMC[i].symbol == tokenSymbol)
				{
					console.log(lstAllTokensCMC[i].name);
				}
			}
		});
	}

	function readCMC_Tokens() {
		var listAllTokens = [];
		var dateSync = new Date(JSON.parse(localStorage.getItem('date_cmc_tokens')));
		var diff = new Date(new Date() - dateSync);
		var days = diff.getTime()/1000/60;
		$.ajax({
			type: "GET",
			url: "./cmc.json",
			dataType: "json",
			async: false,
			success: function(data) { 
				listAllTokens = data;
			}
		});
		return listAllTokens;
	}

	function loadCMC_Tokens() {
		var listAllTokens = []; 
		$.ajax({
			url: cmc_urlAPI+'?limit=0&convert=EUR',
			dataType: 'json',
			async: false,
			success: function(data) {
				listAllTokens = data;
			}
		});
		return listAllTokens;
	}

	function refreshTables() {
		info_CoinMarketCap_Global();
		if(configScreener.onlineMode) {
			//////////////////////////////////////////////////////////////////
			// MODE ON LINE /////////////////////////////////////////////////
			lstAllTokensCMC = loadCMC_Tokens();
			loadWallet_online();
			generateTable(lstCoins, "dvTableCoins");
			var newCells = GenerateCoinsInfos();
			// var newCells = GenerateCoinsInfos();
			// var newCells = GenerateTokensInfos();
			//////////////////////////////////////////////////////////////////
		}
		else {
			//////////////////////////////////////////////////////////////////
			// MODE OFF LINE /////////////////////////////////////////////////
			GenerateCoinsInfos_offline();
			GenerateTokensInfos_offline();
			//////////////////////////////////////////////////////////////////
		}
	}

	function changeDayGraph(choice) {
		if(choice.value == "oneday") {
			if(choice.checked) {
				$(".sparkline1d").css("display", "inline");
			}
			else {
				$(".sparkline1d").css("display", "none");
			}
		}
		if(choice.value == "sevenday") {
			if(choice.checked) {
				$(".sparkline7d").css("display", "inline");
			}
			else {
				$(".sparkline7d").css("display", "none");
			}
		}
	}

	function choiceCurrency(type) {
		if(type == "EUR") {
			currency = "EUR";
			currencySym = "€";
			decimals = 5;
		}
		if(type == "USD"){
			currency = "USD";
			currencySym = "$";
			decimals = 5;
		}
		if(type == "BTC"){
			currency = "BTC";
			currencySym = "B";
			decimals = 8;
		}
		if(type == "ETH"){
			currency = "ETH";
			currencySym = "E";
			decimals = 7;
		}
		if(type == "LTC"){
			currency = "LTC";
			currencySym = "L";
			decimals = 7;
		}
		if(type == "NEO"){
			currency = "NEO";
			currencySym = "N";
			decimals = 7;
		}
		
		info_CoinMarketCap_Global();
		var newCells = GenerateTokensInfos();
	}

	function tokenInfo_CoinMarketCap(token, idImage, nbTokens, convert) {
		//currency = $("#currencyChoice").val();
		var tokenInfo = new Array();
		var pump = "";
		var curr_convert = "";
		var priceToken = 0;
		if(convert == "") { curr_convert = currency; }
		else { curr_convert = convert.toUpperCase(); }

		var jqxhr = $.getJSON(cmc_urlAPI+token+'/?convert='+curr_convert);
		jqxhr.done(function(data) {
			if(token == "BITCOIN") { 
				priceBTC = (currency == "EUR" ? parseFloat(data[0].price_eur) : parseFloat(data[0].price_usd));
			}
			if(token == "ETHEREUM") { 
				priceETH = (currency == "EUR" ? parseFloat(data[0].price_eur) : parseFloat(data[0].price_usd));
			}
			
			priceToken = calculPriceToken(data, curr_convert.toUpperCase());
			
			verifyBump_Token(data[0]);
			
			var priceWallet = priceToken * nbTokens;
			if(data[0]["percent_change_24h"] > 0) { 
				colorvar = "percent_change_green" 
				colorName = "tokename_green";
			}
			else { 
				colorvar = "percent_change_red" 
				colorName = "tokename_red";
			}
			if(data[0]["percent_change_24h"] > 15 && data[0]["percent_change_24h"] < 30) { 
				pump = "pump"; 
			}
			else if(data[0]["percent_change_24h"] >= 30) { colorName = ""; pump = "bigpump"; }
			else if(data[0]["percent_change_24h"] < -15 && data[0]["percent_change_24h"] > -40) { pump = "pump"; }
			else if(data[0]["percent_change_24h"] <= -40) {  colorName = ""; pump = "bigdump"; }
			
			if(data[0].name.length > 10) { 
				if(data[0].symbol.length >3) { lenTokenName = 5; }
				else { lenTokenName = 8; }
				affTokenName = data[0].name.substring(0,lenTokenName) + "..."; 
			}
			else { affTokenName = data[0].name; }
			var tokenInfo = "<div class='cellule'>"+
								"<div class='tokenicon' id=icon><img src='"+spootnik_urlStatic32IMG+data[0].id+".png' /></div>"+
								"<div class='tokeninfo' id=text>"+
									"<div id='"+colorName+"' class='"+pump+"'>"+affTokenName+" ("+data[0].symbol+")</div>"+
									"<div id='token_infos' class='"+colorvar+"'>"+
										"<span id='price_eur'>"+priceToken.toFixed(decimals)+" "+currencySym+"</span> <span id='percent_change'>("+data[0]["percent_change_24h"]+"%)</span>"+
									"</div>"+
									"<div id='wallet_infos' class=''>"+
									"<span id='price_eur'>"+priceWallet.toFixed(decimals)+" "+currencySym+"</span> <span id='percent_change'>("+nbTokens+data[0].symbol+")</span>"+
									"</div>"+
								"</div>"+
								
			
							"</div>"+
			"<div class='rowInfos'>"+
			"<div id='rank' class='Column'>RANK<br>"+data[0].rank+"</div><div id='market_cap' class='Column'>MARKET CAP<br>$"+nFormatter(data[0].market_cap_usd, 2)+"</div><div id='volume' class='Column'>VOLUME (24H)<br>$"+nFormatter(data[0]["24h_volume_usd"], 2)+"</div>"+
			"</div>"+
			"<div class='sparkline1d'>"+
			// "<div id='sparktext'>1d:</div><div id='sparkImg1d' class='Column'><img class='sparkline' src='"+cmc_sparkLine1d+idImage+".png' /></div>"+
			"</div>"+
			"<div class='sparkline7d'>"+
			// "<div id='sparktext'>7d:</div><div id='sparkImg7d' class='Column'><img class='sparkline' src='"+cmc_sparkLine7d+idImage+".png' /></div>"+
			"</div>"+
			"<div class='rowBlank'>"+
			"</div>";		
			$("#"+token).html(tokenInfo);
		});
	}

	function tokenInfo_CoinMarketCap_offline(tokenName, token) {
		//currency = $("#currencyChoice").val();
		var tokenInfo = new Array();
		var pump = "";
		var curr_convert = "";
		var priceToken = 0;
		priceToken = calculPriceToken(token, "EUR");

		verifyBump_Token(token[0]);
		
		var priceWallet = token[10] * token[7];
		if(token[4] > 0) { 
			colorvar = "percent_change_green" 
			colorName = "tokename_green";
		}
		else { 
			colorvar = "percent_change_red" 
			colorName = "tokename_red";
		}
		if(token[4] > 15 && token[4] < 30) { 
			pump = "pump"; 
		}
		else if(token[4] >= 30) { colorName = ""; pump = "bigpump"; }
		else if(token[4] < -15 && token[4] > -40) { pump = "pump"; }
		else if(token[4] <= -40) {  colorName = ""; pump = "bigdump"; }

		walletBalance += priceWallet;
		
		if(token[8].length > 10) { 
			if(token[1].length >3) { lenTokenName = 5; }
			else { lenTokenName = 8; }
			affTokenName = token[8].substring(0,lenTokenName) + "..."; 
		}
		else { affTokenName = token[8]; }
		// console.log(tokenName + " : " +affTokenName);
		var tokenInfo = "<div class='cellule'>"+
							"<div class='tokenicon' id=icon><img src='"+spootnik_urlStatic32IMG+token[0]+".png' /></div>"+
							"<div class='tokeninfo' id=text>"+
								"<div id='"+colorName+"' class='"+pump+"'>"+affTokenName+" ("+token[1]+")</div>"+
								"<div id='token_infos' class='"+colorvar+"'>"+
									"<span id='price_eur'>"+priceToken.toFixed(decimals)+" "+currencySym+"</span> <span id='percent_change'>("+token[4]+"%)</span>"+
								"</div>"+
								"<div id='wallet_infos' class=''>"+
								"<span id='price_eur'>"+priceWallet.toFixed(decimals)+" "+currencySym+"</span> <span id='percent_change'>("+token[7]+token[1]+")</span>"+
								"</div>"+
							"</div>"+
							
		
						"</div>"+
		"<div class='rowInfos'>"+
		"<div id='rank' class='Column'>RANK<br>"+token[2]+"</div><div id='market_cap' class='Column'>MARKET CAP<br>$"+nFormatter(token[5], 2)+"</div><div id='volume' class='Column'>VOLUME (24H)<br>$"+nFormatter(token[6], 2)+"</div>"+
		"</div>"+
		"<div class='sparkline1d'>"+
		// "<div id='sparktext'>1d:</div><div id='sparkImg1d' class='Column'><img class='sparkline' src='"+cmc_sparkLine1d+idImage+".png' /></div>"+
		"</div>"+
		"<div class='sparkline7d'>"+
		// "<div id='sparktext'>7d:</div><div id='sparkImg7d' class='Column'><img class='sparkline' src='"+cmc_sparkLine7d+idImage+".png' /></div>"+
		"</div>"+
		"<div class='rowBlank'>"+
		"</div>";		
		$("#"+tokenName).html(tokenInfo);
	}

	function tokenInfo_IDEXmarket(token, idImage, nbTokens, convert) {
		$.post('https://api.idex.market/returnTicker',
		{
			json: {
				market: 'ETH_FDZ'
			}
			}, function(err, resp, body) {
			console.log(body);
		});
	}

	function info_CoinMarketCap_Global() {
		//console.log(cmc_urlAPIinformation+currency);
		var jqxhr = $.getJSON(cmc_urlAPIinformation+currency);
		jqxhr.done(function(data) {
			//console.log(data);
			var dateConvert = convertDate(data.last_updated);
			$("#lastupdate").html(dateConvert);
			if(currency == "EUR") {
				$("#gl_MC").html(nFormatter(data.total_market_cap_eur, 4));
				$("#gl_Vol").html(nFormatter(data.total_24h_volume_eur, 4));
			}
			if(currency == "USD"){
				$("#gl_MC").html(nFormatter(data.total_market_cap_usd, 4));
				$("#gl_Vol").html(nFormatter(data.total_24h_volume_usd, 4));
			}
			if(currency == "ETH"){
				$("#gl_MC").html(nFormatter(data.total_market_cap_eth, 4));
				$("#gl_Vol").html(nFormatter(data.total_24h_volume_eth, 4));
			}
			if(currency == "LTC"){
				$("#gl_MC").html(nFormatter(data.total_market_cap_ltc, 4));
				$("#gl_Vol").html(nFormatter(data.total_24h_volume_ltc, 4));
			}
			if(currency == "NEO"){
				$("#gl_MC").html(nFormatter(data.total_market_cap_neo, 4));
				$("#gl_Vol").html(nFormatter(data.total_24h_volume_neo, 4));
			}
			
			$("#curr_symb1").html(currencySym);
			$("#curr_symb2").html(currencySym);
			$("#curr_symb3").html(currencySym);
			
				if(data.bitcoin_percentage_of_market_cap > 50) { $("#gl_BTCdom").css("color", "red"); }
			else { $("#gl_BTCdom").css("color", "green"); }
			
			$("#gl_BTCdom").html(data.bitcoin_percentage_of_market_cap);
		});	
	}

	function GenerateTokensInfos() {
		var cells = { };
		$.each(lstTokens, function(key, value) {
			var tokenName = value[0];
			if(value[1] == "coinmarketcap") {
				tokenInfo_CoinMarketCap(tokenName, value[2], parseFloat(value[4]), value[3]);
			}
			else {
				tokenInfo_IDEXmarket(tokenName, value[2], parseFloat(value[4]), value[3]);
			}
		});
		return cells;
	}

	function GenerateCoinsInfos_offline() {
		var cells = { };
		var nbCoins = smallListCoins.length;
		$.each(smallListCoins, function(key, value) {
			// console.log(key + " : " + value[1]);
			if(value != null) {
				var objCoin = lstGoodCoins[value[1]];
				tokenInfo_CoinMarketCap_offline(value[0], objCoin);
			}
		});
		console.log("Nb Coins : "+nbCoins);
		return cells;
	}

	function GenerateTokensInfos_offline() {
		var cells = { };
		var nbCoins = smallListTokens.length;
		$.each(smallListTokens, function(key, value) {
			// console.log(key + " : " + value[1]);
			if(value != null) {
				var objCoin = lstGoodTokens[value[1]];
				tokenInfo_CoinMarketCap_offline(value[0], objCoin);
			}
		});
		console.log("Nb Tokens : "+nbCoins);
		return cells;
	}

	function GenerateCoinsInfos() {
		var cells = { };
		var nbCoins = 0;
		$.each(lstCoins, function(key, value) {
			var coinName = value[0].toLowerCase();
			if(value[1] == "coinmarketcap") {
				if(!configScreener.localWallet) {
					if((lstAllTokensCMC.filter(p => (p.id).toLowerCase() == coinName)).length > 0) {
						var indexToken = lstAllTokensCMC.findIndex(p => (p.id).toLowerCase() == coinName);
						var token = lstAllTokensCMC.filter(p => (p.id).toLowerCase() == coinName);
						lstGoodCoins[token[0].rank] = [token[0].id, token[0].symbol, token[0].rank, token[0].price_btc, token[0]["percent_change_24h"], token[0].market_cap_usd, token[0]["24h_volume_usd"], parseFloat(value[4]), token[0].name, token[0].price_usd, token[0].price_eur, "Not a token"] ;
						smallListCoins.push([(token[0].id).toUpperCase(), parseInt(token[0].rank)]);
					}
					else {
						unkTokens.push([tokenName, tokenName, 0, 0, 0, 0, 0, ""]);
					}							
				}
				else if(!func_GetWallet.includes(value[0])) {
					if((lstAllTokensCMC.filter(p => (p.id).toLowerCase() == coinName)).length > 0) {
						var indexToken = lstAllTokensCMC.findIndex(p => (p.id).toLowerCase() == coinName);
						var token = lstAllTokensCMC.filter(p => (p.id).toLowerCase() == coinName);
						lstGoodCoins[token[0].rank] = [token[0].id, token[0].symbol, token[0].rank, token[0].price_btc, token[0]["percent_change_24h"], token[0].market_cap_usd, token[0]["24h_volume_usd"], parseFloat(value[4]), token[0].name, token[0].price_usd, token[0].price_eur, "Not a token"] ;
						smallListCoins.push([(token[0].id).toUpperCase(), parseInt(token[0].rank)]);
					}
					else {
						unkTokens.push([tokenName, tokenName, 0, 0, 0, 0, 0, ""]);
					}							
				}
			}
			else {
				// tokenInfo_IDEXmarket(coinName, value[2], parseFloat(value[4]), value[3]);
			}
		});
		$.each(lstTokens, function(key, value) {
			var coinName = value[0].toLowerCase();
			if(value[1] == "coinmarketcap") {
				if(!configScreener.localWallet) {
					if((lstAllTokensCMC.filter(p => (p.id).toLowerCase() == coinName)).length > 0) {
						var indexToken = lstAllTokensCMC.findIndex(p => (p.id).toLowerCase() == coinName);
						var token = lstAllTokensCMC.filter(p => (p.id).toLowerCase() == coinName);
						lstGoodTokens[token[0].rank] = [token[0].id, token[0].symbol, token[0].rank, token[0].price_btc, token[0]["percent_change_24h"], token[0].market_cap_usd, token[0]["24h_volume_usd"], parseFloat(value[4]), token[0].name, token[0].price_usd, token[0].price_eur, "Not a token"] ;
						smallListTokens.push([(token[0].id).toUpperCase(), parseInt(token[0].rank)]);
					}
					else {
						unkTokens.push([tokenName, tokenName, 0, 0, 0, 0, 0, ""]);
					}							
				}
				else if(!func_GetWallet.includes(value[0])) {
					if((lstAllTokensCMC.filter(p => (p.id).toLowerCase() == coinName)).length > 0) {
						var indexToken = lstAllTokensCMC.findIndex(p => (p.id).toLowerCase() == coinName);
						var token = lstAllTokensCMC.filter(p => (p.id).toLowerCase() == coinName);
						lstGoodTokens[token[0].rank] = [token[0].id, token[0].symbol, token[0].rank, token[0].price_btc, token[0]["percent_change_24h"], token[0].market_cap_usd, token[0]["24h_volume_usd"], parseFloat(value[4]), token[0].name, token[0].price_usd, token[0].price_eur, "Not a token"] ;
						smallListTokens.push([(token[0].id).toUpperCase(), parseInt(token[0].rank)]);
					}
					else {
						unkTokens.push([tokenName, tokenName, 0, 0, 0, 0, 0, ""]);
					}							
				}
			}
			else {
				// tokenInfo_IDEXmarket(coinName, value[2], parseFloat(value[4]), value[3]);
			}
		});
		return cells;
	}

	function loadWallet_online() {
		$.each(lstCoins, function(key, value) {
			if(value[0] == "NEO") {
				getWallet_NEO(value[5]);
			}
			if(value[0] == "ARCTICCOIN") {
				getWallet_ArcTic(value[5]);
			}
		});
	}

	</script>
</body>
</html>
