<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="shortcut icon" type="image/png" href="./css/favicon.png" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous"> -->
    <link rel="stylesheet" href="./js/bootstrap/4.1.1/css/bootstrap.min.css">
    <!-- integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous"> -->
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"> -->
    <link rel="stylesheet" href="./css/font-awesome/4.4.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="./css/style.css">
    <title>CryptoScreener - </title>
</head>

<body>
    <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
        <a class="navbar-brand" href="#">CryptoScreener</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarsExampleDefault">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Indispensables</a>
                    <div id="lnk_indisp" class="dropdown-menu" aria-labelledby="dropdown01">
                        <div class="dropdown-header">Explorateur Ethereum</div>
                        <a class="dropdown-item" id="Etherscan" href="#" target="_blank">Etherscan.io</a>
                        <a class="dropdown-item" id="Ethplorer" href="#" target="_blank">Ethplorer.io</a>
                        <a class="dropdown-item" id="DeltaBalances" href="#" target="_blank">DeltaBalances.github.io</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" id="CMC" href="#" target="_blank">CoinMarketCap.com</a>
                        <div class="dropdown-divider"></div>
                        <div class="dropdown-header">Decentralised Exchange (DEX)</div>
                        <a class="dropdown-item" id="EtherDelta" href="#" target="_blank">EtherDelta</a>
                        <a class="dropdown-item" id="ForkDelta" href="#" target="_blank">ForkDelta</a>
                        <a class="dropdown-item" id="IDEX" href="#" target="_blank">IDEX</a>
                        <a class="dropdown-item" id="DDEX" href="#" target="_blank">DDEX</a>
                        <a class="dropdown-item" id="Switcheo" href="#" target="_blank">Switcheo</a>
                    </div>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Markets</a>
                    <div class="dropdown-menu" aria-labelledby="dropdown01">
                        <div class="dropdown-header">Liens avec Référent</div>
                        <a class="dropdown-item" id="" href="https://www.coinbase.com/join/5a17d1399f4b6201f9ccf8b8" target="_blank">Coinbase</a>
                        <a class="dropdown-item" id="" href="https://www.binance.com/?ref=20298188" target="_blank">Binance</a>
                        <a class="dropdown-item" id="" href="https://www.kucoin.com/#/?r=25g2f" target="_blank">Kucoin</a>
                        <a class="dropdown-item" id="" href="https://www.huobi.br.com/fr-fr/topic/invited/?invite_code=e9de3" target="_blank">Huobi-Pro</a>
                        <div class="dropdown-divider"></div>
                        <div class="dropdown-header">Liens sans Référent</div>
                        <a class="dropdown-item" id="" href="https://www.coinbase.com/dashboard" target="_blank">Coinbase</a>
                        <a class="dropdown-item" id="" href="https://www.binance.com" target="_blank">Binance</a>
                        <a class="dropdown-item" id="" href="https://www.kucoin.com" target="_blank">Kucoin</a>
                        <a class="dropdown-item" id="" href="https://www.huobi.pro/fr-fr/" target="_blank">Huobi-Pro</a>
                    </div>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Télégram</a>
                    <div class="dropdown-menu" aria-labelledby="dropdown01">
                        <a class="dropdown-item" id="" href="https://t.me/cryptogainschat" target="_blank">Cryptogains.fr - Chat</a>
                        <a class="dropdown-item" id="" href="https://t.me/cryptogainsairdrops2" target="_blank">Cryptogains.fr - Airdrop</a>
                    </div>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="dd_Wallets" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Wallets</a>
                    <div class="dropdown-menu" aria-labelledby="dropdown01">
                        <div class="dropdown-header">Ethereum</div>
                        <a class="dropdown-item" id="MyEtherWallet" href="#" target="_blank">MyEtherWallet</a>
                        <a class="dropdown-item" id="MyCrypto" href="#" target="_blank">MyCrypto</a>
                        <a class="dropdown-item" id="MetaMask" href="#" target="_blank">MetaMask</a>
                        <div class="dropdown-divider"></div>
                        <div class="dropdown-header">Divers</div>
                        <a class="dropdown-item" id="NeoTracker" href="#" target="_blank">Neo Tracker</a>
                        <a class="dropdown-item" id="WavesPlatform" href="#" target="_blank">Waves Platform</a>
                    </div>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="dd_Options" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Options</a>
                    <div class="dropdown-menu" aria-labelledby="dropdown01">
                        <div class="form-check">
                            <label class="form-check-label"><input id="cb_ModeCS" type="checkbox" class="form-check-input" value="">Mode Online</label>
                        </div>
                        <div class="form-check">
                            <label class="form-check-label" data-toggle='tooltip' title='Charge votre Wallet extrait de DeltaBlances'><input id="cb_LocalWallet" type="checkbox" class="form-check-input" value="">Wallet Local</label>
                        </div>
                        <!-- <div class="form-check disabled">
                            <label class="form-check-label"><input type="checkbox" class="form-check-input" value="" disabled>Reset</label>
                        </div> -->
                        <div class="form-check">
                            <label class="form-check-label" data-toggle='tooltip' title='Affichage des graphiques 7 jours de tout les tokens.'><input id="cb_graphDay" type="checkbox" class="form-check-input" value="">Graphiques</label>
                        </div>
                        <div class="dropdown-divider"></div>
                        <div class="dropdown-header">Tri</div>
                        <div class="form-check">
                            <label class="form-check-label"><input type="radio" id="radio_Rank" class="form-check-input" name="optradio">Rank</label>
                        </div>
                        <div class="form-check">
                            <label class="form-check-label"><input type="radio" id="radio_Balance" class="form-check-input" name="optradio">Balance</label>
                        </div>
                        <div class="form-check disabled">
                            <label class="form-check-label"><input type="radio" id="radio_24H" class="form-check-input" name="optradio">24H</label>
                        </div>
                        <div class="dropdown-divider"></div>
                        <div class="dropdown-header">Wallet Ethereum :</div>
                        <div class="form-group">
                            <input id="input_addEth" type="text" class="form-control">
                        </div>
                    </div>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="currencyChoice" data-toggle="dropdown">EUR</a>
                    <div id="currencyChoice" class="dropdown-menu">
                        <a id="currEUR" class="dropdown-item active" href="#">EUR</a>
                        <a id="currUSD" class="dropdown-item" href="#">USD</a>
                        <a id="currBTC" class="dropdown-item" href="#">BTC</a>
                        <!-- <a id="currETH" class="dropdown-item" href="#">ETH</a>
                        <a id="currLTC" class="dropdown-item disabled" href="#">LTC</a>
                        <a id="currNEO" class="dropdown-item disabled" href="#">NEO</a> -->
                    </div>
                </li>
            </ul>
            <ul class="nav nav-pills">
                <li class="nav-item">
                    <span class="btn btn-light">Bal: <span id="wallet_Balance" class="badge">0</span></span>
                </li>
                <li class="nav-item">
                    <span id="bt_glMC" class="btn btn-info">M.Cap: <span id="gl_MC" class="badge badge-light">0</span></span>
                </li>
                <li class="nav-item">
                    <span id="bt_glVol" class="btn btn-info">24h Vol: <span id="gl_Vol" class="badge badge-light">0</span></span>
                </li>
                <li class="nav-item">
                    <span id="bt_glBTCDom" class="btn btn-secondary">BTC Dom: <span id="gl_BTCdom" class="badge badge-light">0%</span></span>
                </li>
            </ul>
            <!--<form class="form-inline my-2 my-lg-0">
            <input class="form-control mr-sm-2" type="text" placeholder="Search" aria-label="Search">
            <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
          </form> -->
        </div>
    </nav>
    <div id="alertRubbon" class="">
        <button type="button" class="close" data-dismiss="alert">&times;</button>
        <span id="alert_msg"></span>
    </div>

    <main role="main" class="container-fluid">
        <div id="lstCoins" class="row"></div>
        <hr id="separation" />
        <div id="lstTokens" class="row"></div>
        <hr id="separation" />
        <div id="lstUnkTokens" class="row"></div>
    </main>
    <!-- /.container -->

    <footer class="footer">
        <div class="row no-gutters">
            <div class="col-1 col-md-1">
                <div class="dropup float-left">
                    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
                                      Aide
                                    </button>
                    <div id="dd_Help" class="dropdown-menu dropdown-menu-left">
                        <a class="dropdown-item" data-toggle="modal" data-target="#modal_Help" href="#"><span data-toggle='tooltip' title="Aide à l'installation de CryptoScreener sur Windows ou MacOS.">Installation</span></a>
                        <a class="dropdown-item" data-toggle="modal" data-target="#modal_Help" href="#"><span data-toggle='tooltip' title="Explication des menus de l'application."></span>Menu</span></a>
                        <a class="dropdown-item" data-toggle="modal" data-target="#modal_Help" href="#"><span data-toggle='tooltip' title="Question et réponses."></span>FAQ</span></a>
                    </div>
                </div>
                <!-- <button type="button" data-toggle="modal" title="Popover Header" class="btn btn-primary btn-lg float-right" data-target="#modal_Help">Aide</button> -->
            </div>
            <div class="col-10 col-md-10" style="line-height: 100%;">
                <div class="d-flex flex-column">
                    <div class="p-2 small text-center" style="padding-left: 10px">2018 / Youpit44 (at) GitHub.com</div>
                    <div id="all_Wallets" class="p-2 small text-center" style="padding-left: 10px">-</div>
                </div>
            </div>
            <div class="col-1 col-md-1" style="padding-left: 10px;line-height: 100%;">
                <div class="d-flex flex-column">
                    <div class="p-2 small text-center" style="padding-left: 10px">
                        <span id="modeCS" class="badge">offline</span>
                    </div>
                    <div class="p-2 small text-center" style="padding-left: 10px">
                        <a class="" href="https://github.com/youpit44/cryptoscreener" target="_blank">v<span id="verCS">x.x</span></a>
                    </div>
                </div>
            </div>
        </div>

    </footer>
    <!-- The Modal -->
    <div class="modal" id="modal_Help">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">

                <!-- Modal Header -->
                <div id="help_header" class="modal-header">
                    <h4 class="modal-title">CryptoScreener</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <!-- Modal body -->
                <div id="help_body" class="modal-body">

                </div>

                <!-- Modal footer -->
                <div id="help_footer" class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Fermer</button>
                </div>

            </div>
        </div>
    </div>
    <!-- <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script> -->
    <script src="./js/jquery-3.3.1.min.js"></script>
    <!-- integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script> -->
    <script src="./js/popper.js/1.14.3/umd/popper.min.js"></script>
    <!-- integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script> -->
    <script src="./js/bootstrap/4.1.1/js/bootstrap.min.js"></script>
    <!-- integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script> -->
    <script src="./js/initScreener.js"></script>
    <script src="./js/apiCryptoScreener.js"></script>
    <script src="./js/libCryptoScreener.js"></script>
    <script src="./js/configCryptoScreener.js"></script>
    <script>
        /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        // VARIABLES  
        //
        var lst_CMC_ID_Tokens = new Array();

        var tokenName = "Bitcoin";
        //var currency = "€";

        var cmc_sparkLine7d = "https://s2.coinmarketcap.com/generated/sparklines/web/7d/usd/";

        var decimals = 0;
        var lst_CMC_ID_Tokens = new Array();
        var table = $("#mytable");
        var currency = $("#currencyChoice").text().trim();
        var currencySym = "€";
        var gain_loss = 0;
        var indexOrder = "ASC";
        var indexItem = 2;
        var walletETH;

        /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        // START APPLICATION
        /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        eventsCryptoScreener();

        $(document).ready(startApp());
        /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        // END APPLICATION
        /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


        /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        // FUNCTIONS START 
        //
        function startApp() {
            if (isReady()) {
                $("#alert_msg").html("<strong>Initialiation ! </strong>Veuillez patientez pendant le chargement des données...");
                $("#alertRubbon").addClass("alert alert-success alert-dismissible fade show");
                if (isUpdate()) {
                    majCryptoScreener();
                }
                //alert("marche ");



                initScreenerConfiguration();
                setScreenerParam();
                info_CoinMarketCap_Global();
                lst_CMC_ID_Tokens = loadCMC_ListID_tokens();
                list_All_CMCTokens = loadCMC_Tokens();
                list_All_IDEXTokens = get_TokenPrice_IDEX();

                //console.log(list_All_IDEXTokens["ETH_HYDRO"]);

                if (configScreener.onlineMode && configScreener.otherWallet) {
                    loadWallet_online();
                }
                get_LocalWallet();

                if (configScreener.localWallet) {
                    read_walletETH_DeltaBalances(configScreener.walletName);
                }
                // console.log(smallListCoins);

                changeCurrency(configScreener.currencyDefault);

                verifyBalances();


            } else {

                $("#alert_msg").html("<strong>Installation en cours...</strong> Chargement des données.");
                $("#alertRubbon").addClass("alert alert-info alert-dismissible fade show");
                install_CryptoScreener();
                location.reload();
            }



            //console.log(walletBalance);
            //makeCard();
            $('.close').alert("close");

        }

        function read_walletETH_DeltaBalances(walletFile) {
            var listAllTokens = [];
            $.ajax({
                type: "GET",
                url: walletFile,
                dataType: "text",
                async: false,
                success: function(data) {
                    listAllTokens = processData(data);
                    var tokenName;
                    $.each(listAllTokens, function(key, values) {
                        $.each(values, function(header, value) {
                            var splitLine = value.split(":");
                            var idImgToken = 0;
                            var rankToken = 0;
                            var slug = "";
                            var _symbol = "";
                            var _tokenName = "";
                            if (splitLine[0] == "Token") {
                                tokenName = splitLine[1];
                                if (tokenName.indexOf('(') > -1) {
                                    tokenName = tokenName.substring(0, tokenName.indexOf('('));
                                }
                                var nbTokens = values[7].split(":");
                                var contractAddress = values[10].split(":");
                                //var totalTokens = parseFloat(nbTokens[1]) * token[0].price_eur;
                                if (((exceptTokens.indexOf(tokenName) == -1) && (exceptContract.indexOf(contractAddress[1]) == -1))) {
                                    var cmc_idToken = lst_CMC_ID_Tokens.filter(filterBySymbol, tokenName);
                                    if (cmc_idToken[0] != null) {
                                        idImgToken = cmc_idToken[0].id;
                                        rankToken = cmc_idToken[0].rank;
                                        slug = cmc_idToken[0].slug;
                                        _symbol = cmc_idToken[0].symbol;
                                        _tokenName = cmc_idToken[0].name;
                                        // console.log(tokenName);
                                        // console.log(cmc_idToken[0]);
                                    } else {
                                        _tokenName = (tokenName).toUpperCase();
                                        _symbol = _tokenName;
                                    }
                                    if (contractAddress[1] != "Not a token") {
                                        //lstGoodTokens[token[0].rank] = [token[0].id, token[0].symbol, token[0].rank, token[0].price_btc, token[0]["percent_change_24h"], token[0].market_cap_usd, token[0]["24h_volume_usd"], parseFloat(nbTokens[1]), token[0].name, token[0].price_usd, token[0].price_eur, contractAddress[1], cmc_idToken[0].id];
                                        // if(contractAddress[1]){
                                        //     getInfoERC20Token
                                        // }
                                        //smallListTokens.push([(tokenName).toUpperCase(), rankToken, idImgToken, parseFloat(nbTokens[1]), contractAddress[1]]);
                                        var cmc_TokenInfo = list_All_CMCTokens.filter(filterByID, slug.toUpperCase());
                                        var tokenInfo = 0;
                                        var tokenPrice = 0;
                                        var totalWallet = 0;
                                        var change = 0;
                                        if (cmc_TokenInfo.length > 0) {
                                            tokenInfo = cmc_TokenInfo[0];
                                            tokenPrice = parseFloat(tokenInfo["price_" + currency.toLowerCase()]);
                                            totalWallet = tokenPrice * parseFloat(nbTokens[1]);
                                            change = parseFloat(tokenInfo["percent_change_24h"]);
                                        }
                                        smallListTokens.push({
                                            name: _tokenName,
                                            rank: rankToken,
                                            symbol: _symbol,
                                            slug: slug,
                                            img: idImgToken,
                                            nbtoken: parseFloat(nbTokens[1]),
                                            contract: contractAddress[1],
                                            wallet: "deltabalances",
                                            "24h": change,
                                            balance: totalWallet
                                        });
                                        // console.log(_tokenName + " " + tokenPrice + " " + parseFloat(nbTokens[1]) + " = " + totalWallet);
                                    } else {
                                        //var cmc_idToken = lst_CMC_ID_Tokens.filter(filterBySlug, (value[0]).toUpperCase());
                                        // console.log(values);
                                        //lstGoodCoins[token[0].rank] = [token[0].id, token[0].symbol, token[0].rank, token[0].price_btc, token[0]["percent_change_24h"], token[0].market_cap_usd, token[0]["24h_volume_usd"], parseFloat(nbTokens[1]), token[0].name, token[0].price_usd, token[0].price_eur, contractAddress[1], cmc_idToken[0].id];
                                        // smallListCoins.push([(tokenName).toUpperCase(), rankToken, idImgToken, parseFloat(nbTokens[1]), contractAddress[1]]);
                                    }
                                    // console.log(cmc_idToken);
                                }
                            }
                        });
                        //console.log(smallListTokens);

                    });
                }
            });

            // console.log(smallListTokens);
            smallListTokens = smallListTokens.reduce(function(item, e1) {
                var matches = item.filter(function(e2) {
                    return e1.name == e2.name;
                });
                if (matches.length == 0) {
                    item.push(e1);
                } else {
                    exceptTokens.push(e1);
                }
                return item;
            }, []);

            // console.log(exceptTokens);
            // console.log(smallListTokens);

        }




        function verifyBalances() {
            var last_balance = JSON.parse(localStorage.getItem('cs_balances'));
            changeWalletBalance();
            let balance = currencySym + walletBalance.toFixed(decimals);

            $("#wallet_Balance").html(balance);

            if (walletBalance > last_balance.EUR) {
                $("#wallet_Balance").addClass("badge-success");
            } else {
                $("#wallet_Balance").addClass("badge-danger");
            }
            cooldown_Wallet();
        }

        function makeCard() {
            console.log("Load: " + smallListCoins.length + " Coins");
            // console.log(smallListCoins);
            $.each(smallListCoins, function(key, token) {
                if (token.slug != "") {
                    var _symbol = "";
                    var max_supply = 0;
                    var total_supply = 0;
                    var available_supply = 0;

                    var cmc_TokenInfo = list_All_CMCTokens.filter(filterByID, (token.slug).toUpperCase());
                    var tokenInfo = cmc_TokenInfo[0];
                    if (symbol[token.symbol]) {
                        _symbol = symbol[token.symbol];
                    } else {
                        _symbol = token.symbol;
                    }

                    var tokenPrice = parseFloat(tokenInfo["price_" + currency.toLowerCase()]);
                    priceToken[token.symbol] = tokenPrice;

                    var alt_currency = currency == "EUR" || currency == "USD" ? currency : "USD"
                    var tokenMCap = nFormatter(parseFloat(tokenInfo["market_cap_" + alt_currency.toLowerCase()]), 3);
                    var tokenVolume = nFormatter(parseFloat(tokenInfo["24h_volume_" + alt_currency.toLowerCase()]), 3);

                    if (tokenInfo.max_supply) {
                        max_supply = parseFloat(tokenInfo.max_supply);
                    }
                    if (tokenInfo.total_supply) {
                        total_supply = parseFloat(tokenInfo.total_supply);
                    }
                    if (tokenInfo.available_supply) {
                        available_supply = parseFloat(tokenInfo.available_supply);
                    }
                    ////////////////////////////////////////////////////////////////////////////////////
                    // Création d'un Token
                    var setToken = {
                        name: token.name,
                        symbol: _symbol,
                        short: token.symbol,
                        slug: token.slug,
                        price: tokenPrice.toFixed(decimals),
                        percent_change: parseFloat(tokenInfo["percent_change_24h"]),
                        rank: token.rank,
                        mcap: tokenMCap,
                        volume: tokenVolume,
                        balance: token.nbtoken,
                        icon: token.img,
                        max_supply: max_supply,
                        total_supply: total_supply,
                        available_supply: available_supply,
                        output_zone: "lstCoins",
                        contract: token.contract
                    };

                    setTokenBadge(setToken);
                    // console.log(cmc_TokenInfo[0]);
                    //console.log(cmc_TokenInfo);
                }
            });

            console.log("Load: " + smallListTokens.length + " Tokens");
            $.each(smallListTokens, function(key, token) {
                var _symbol = "";
                var max_supply = 0;
                var total_supply = 0;
                var available_supply = 0;
                var cmc_TokenInfo = list_All_CMCTokens.filter(filterByID, (token.slug).toUpperCase());
                var idex_Symbol = "ETH_" + token.symbol;
                var idex_Price = 0;
                // console.log(idex_Symbol);

                //var idex_TokenInfo = 
                //list_All_IDEXTokens.filter(filterByID, (token.slug).toUpperCase());
                if (list_All_IDEXTokens[idex_Symbol] != null) {
                    //console.log(list_All_IDEXTokens[idex_Symbol]);
                    idex_Price = parseFloat(list_All_IDEXTokens[idex_Symbol].last) * priceToken.ETH;
                }

                if (cmc_TokenInfo.length > 0) {
                    var tokenInfo = cmc_TokenInfo[0];
                    if (symbol[token.symbol]) {
                        _symbol = symbol[token.symbol];
                    } else {
                        _symbol = token.symbol;
                    }

                    var tokenPrice = parseFloat(tokenInfo["price_" + currency.toLowerCase()]);

                    var alt_currency = currency == "EUR" || currency == "USD" ? currency : "USD"
                    var tokenMCap = nFormatter(parseFloat(tokenInfo["market_cap_" + alt_currency.toLowerCase()]), 3);
                    var tokenVolume = nFormatter(parseFloat(tokenInfo["24h_volume_" + alt_currency.toLowerCase()]), 3);

                    if (tokenInfo.max_supply) {
                        max_supply = parseFloat(tokenInfo.max_supply);
                    }
                    if (tokenInfo.total_supply) {
                        total_supply = parseFloat(tokenInfo.total_supply);
                    }
                    if (tokenInfo.available_supply) {
                        available_supply = parseFloat(tokenInfo.available_supply);
                    }

                    //////////////////////////////////////////////////////////////////////////////////
                    // Création d'un Token
                    var setToken = {
                        name: token.name,
                        symbol: _symbol,
                        short: token.symbol,
                        slug: token.slug,
                        price: tokenPrice.toFixed(decimals),
                        percent_change: parseFloat(tokenInfo["percent_change_24h"]),
                        rank: token.rank,
                        mcap: tokenMCap,
                        volume: tokenVolume,
                        balance: token.nbtoken,
                        icon: token.img,
                        max_supply: max_supply,
                        total_supply: total_supply,
                        available_supply: available_supply,
                        output_zone: "lstTokens",
                        contract: token.contract,
                        priceIdex: idex_Price
                    };

                    setTokenBadge(setToken);
                }
                // console.log(cmc_TokenInfo[0]);
                // console.log(cmc_TokenInfo);
            });
        }

        function get_LocalWallet() {
            var nbCoins = 0;
            $.each(lstCoins, function(key, value) {
                //console.log(value);
                var coinName = value[0].toLowerCase();
                if ((value[1] == "coinmarketcap") && (value[4] > 0)) {
                    var cmc_idToken = lst_CMC_ID_Tokens.filter(filterBySlug, (value[0]).toUpperCase());
                    var cmc_TokenInfo = list_All_CMCTokens.filter(filterByID, (cmc_idToken[0].slug).toUpperCase());
                    var tokenInfo = cmc_TokenInfo[0];
                    var tokenPrice = parseFloat(tokenInfo["price_" + currency.toLowerCase()]);
                    var totalWallet = tokenPrice * value[4];
                    // console.log(cmc_TokenInfo[0]);
                    smallListCoins.push({
                        name: cmc_idToken[0].name,
                        rank: cmc_idToken[0].rank,
                        symbol: (cmc_idToken[0].symbol).toUpperCase(),
                        slug: cmc_idToken[0].slug,
                        img: cmc_idToken[0].id,
                        nbtoken: value[4],
                        contract: "Not Token",
                        wallet: "local",
                        "24h": parseFloat(tokenInfo["percent_change_24h"]),
                        balance: totalWallet

                    });
                    if (value[5] != "") {
                        list_Wallets_Online.push({
                            name: cmc_idToken[0].name,
                            balance: value[4],
                            address: value[5]
                        })
                    }
                } else {
                    // tokenInfo_IDEXmarket(coinName, value[2], parseFloat(value[4]), value[3]);
                }
            });
            // console.log(smallListCoins);
            $.each(lstTokens, function(key, value) {
                var coinName = value[0].toLowerCase();
                if ((value[1] == "coinmarketcap") && (value[4] > 0)) {
                    //if (exceptTokens.indexOf((value[0]).toUpperCase()) > -1) {
                    var cmc_idToken = lst_CMC_ID_Tokens.filter(filterBySlug, (value[0]).toUpperCase());
                    var cmc_TokenInfo = list_All_CMCTokens.filter(filterByID, (cmc_idToken[0].slug).toUpperCase());
                    var tokenInfo = cmc_TokenInfo[0];
                    var tokenPrice = parseFloat(tokenInfo["price_" + currency.toLowerCase()]);
                    var totalWallet = tokenPrice * value[4];
                    smallListTokens.push({
                        name: cmc_idToken[0].name,
                        rank: cmc_idToken[0].rank,
                        symbol: (cmc_idToken[0].symbol).toUpperCase(),
                        slug: cmc_idToken[0].slug,
                        img: cmc_idToken[0].id,
                        nbtoken: value[4],
                        contract: "",
                        wallet: "local",
                        "24h": parseFloat(tokenInfo["percent_change_24h"]),
                        balance: totalWallet
                    });
                    //}
                } else {
                    // tokenInfo_IDEXmarket(coinName, value[2], parseFloat(value[4]), value[3]);
                }
            });
            // console.log(smallListCoins);

            return false;
        }


        function setScreenerParam() {
            $(document).attr("title", titleApp + " - " + projectApp + " version");

            currency = configScreener.currencyDefault;
            // console.log(currency);
            $("#currencyChoice").text(currency);
            $(".dropdown-item").removeClass("active");
            $("#curr" + currency).addClass("active");
            if (configScreener.onlineMode) {
                $("#modeCS").text("online");
                $("#modeCS").addClass("badge-success");
                $("#cb_ModeCS").prop("checked", "checked");
            } else {
                $("#modeCS").text("offline");
                $("#modeCS").addClass("badge-danger");
            }
            $("#verCS").text(configScreener.version);
            if (configScreener.localWallet) {
                $("#cb_LocalWallet").prop("checked", "checked");
            }
            if (configScreener.graphDisplay) {
                $("#cb_graphDay").prop("checked", "checked");
                // $(".card-footer").css("display", "block");
            }

            //var itemOrder = "ASC";
            if (configScreener.viewOrder == "Rank") {
                indexOrder = "ASC";
                $("#radio_Rank").prop('checked', true);
            } else if (configScreener.viewOrder == "24H") {
                indexOrder = "DESC";
                $("#radio_24H").prop('checked', true);
            } else {
                $("#radio_Balance").prop('checked', true);
                indexOrder = "DESC";
            }

            // $.each()
            //$("#all_Wallets").text(localStorage.getItem('cs_balances'));


            $("#input_addEth").val(walletAddress.ETH);

            // Create Dynamic link to Eth Wallet Explorer
            $("#Etherscan").attr("href", all_ExternalLinks.Etherscan + walletAddress.ETH);
            $("#Ethplorer").attr("href", all_ExternalLinks.Ethplorer + walletAddress.ETH);
            $("#DeltaBalances").attr("href", all_ExternalLinks.DeltaBalances + walletAddress.ETH);

            $("#CMC").attr("href", all_ExternalLinks.CMC);
            $("#ForkDelta").attr("href", all_ExternalLinks.ForkDelta);
            $("#EtherDelta").attr("href", all_ExternalLinks.EtherDelta);
            $("#IDEX").attr("href", all_ExternalLinks.IDEX);
            $("#DDEX").attr("href", all_ExternalLinks.DDEX);
            $("#Switcheo").attr("href", all_ExternalLinks.Switcheo);

            $("#MyEtherWallet").attr("href", all_ExternalLinks.MyEtherWallet);
            $("#MyCrypto").attr("href", all_ExternalLinks.MyCrypto);
            $("#MetaMask").attr("href", all_ExternalLinks.MetaMask);
            $("#NeoTracker").attr("href", all_ExternalLinks.NeoTracker);
            $("#WavesPlatform").attr("href", all_ExternalLinks.WavesPlatform);

            // Préparation de la PopUp d'Aide :
            $("#help_body").append("<hr>");
            $("#help_header h4").append(" v" + configScreener.version);
            $.each(_history, function(ver, history) {
                $("#help_body").append("<span class='small'><b>v" + ver + ":</b> " + history + "</span><br>");
            });

        }

        function setTokenBadge(token) {
            var totalWallet = token.price * token.balance;
            var totalIDEX = token.priceIdex > 0 ? token.priceIdex * token.balance : "-";
            walletBalance += totalWallet;
            // console.log(token);
            var affTokenName = "";
            var signChange = "";
            var pump = false;
            var dump = false;
            var badgeText = "";
            var cl_badge = "";
            var cl_card = "";
            var cl_change = "";
            //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
            // Création du ToolTip des Supply du token
            var tooltip_supply = "Supply: ";
            tooltip_supply += token.max_supply > 0 ? "&#010; Max: " + nFormatter(token.max_supply, 3) : "";
            tooltip_supply += token.total_supply > 0 ? "&#010; Total: " + nFormatter(token.total_supply, 3) : "";
            tooltip_supply += token.available_supply > 0 ? "&#010; Available: " + nFormatter(token.available_supply, 3) : "";

            //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
            // Création du ToolTip du Contract Address
            var tooltip_contract = token.contract != "Not Token" ? "Contract: " + token.contract : "";

            if (token.percent_change > 0) {
                signChange = "+";
            }

            if (token.name.length > 12) {
                let lenTokenName = 12;
                if (token.short.length > 3) {
                    lenTokenName = 10;
                }
                affTokenName = token.name.substring(0, lenTokenName) + "...";
            } else {
                affTokenName = token.name;
            }


            tokenBadge = templateBadge.replace(/_TOKEN_/gi, affTokenName);
            tokenBadge = tokenBadge.replace(/_SLUG_/gi, token.slug);
            tokenBadge = tokenBadge.replace(/_SHT_/gi, token.short);
            tokenBadge = tokenBadge.replace(/_S_/gi, token.symbol);
            tokenBadge = tokenBadge.replace(/_TokenP_/g, currencySym + token.price);
            tokenBadge = tokenBadge.replace(/_WalletP_CMC_/, currencySym + totalWallet.toFixed(decimals));
            //tokenBadge = tokenBadge.replace(/_WalletP_IDEX_/, currencySym + totalIDEX.toFixed(decimals));
            tokenBadge = totalIDEX > 0 ? tokenBadge.replace(/_WalletP_IDEX_/, currencySym + totalIDEX.toFixed(decimals)) : tokenBadge.replace(/_WalletP_IDEX_/, totalIDEX);
            tokenBadge = tokenBadge.replace(/_WalletP_TS_/, currencySym + totalWallet.toFixed(decimals));
            tokenBadge = tokenBadge.replace(/_Currency_/g, currencySym);

            var alt_currency = currency == "EUR" || currency == "USD" ? symbol.EUR : symbol.USD;
            tokenBadge = tokenBadge.replace(/_CurrMCAP_/g, alt_currency);

            tokenBadge = tokenBadge.replace(/_RANK_/, token.rank);
            tokenBadge = token.mcap != "NaN" ? tokenBadge.replace(/_MCAP_/, token.mcap) : tokenBadge.replace(/_MCAP_/, "-");
            tokenBadge = token.mcap != "NaN" ? tokenBadge.replace(/_VOLUME_/, token.volume) : tokenBadge.replace(/_VOLUME_/, "-");
            tokenBadge = tokenBadge.replace(/_SUPPLY_/g, tooltip_supply);
            tokenBadge = tokenBadge.replace(/_CONTRACT_/, tooltip_contract);

            // tokenBadge = tokenBadge.replace(/_PChange_/g, pricechange);
            tokenBadge = tokenBadge.replace(/_PChange_/g, signChange + token.percent_change);
            if (token.balance > 0 && !isInt(token.balance)) {
                var precision = (token.balance + "").split(".")[1].length;
                if (precision > 5) {
                    token.balance = token.balance.toFixed(_decimals.CARD);
                }
            }
            tokenBadge = tokenBadge.replace(/_NBToken_/, token.balance);
            tokenBadge = tokenBadge.replace(/_ID_FLAG_/g, token.icon);

            $("#" + token.output_zone).append(tokenBadge);
            //$("#"+tokenName+" #headerCard").addClass(colorCard.warning);

            switch (true) {
                case (token.percent_change <= -50):
                    dump = true;
                    badgeText = "DUMP";
                    cl_badge = colorBadge.danger;
                    cl_card = colorCard.warning;
                    break;
                case (token.percent_change <= -30):
                    dump = true;
                    badgeText = "DUMP";
                    cl_badge = colorBadge.danger;
                    cl_change = colorBadge.danger;
                    break;
                case (token.percent_change <= -15):
                    cl_badge = colorBadge.danger;
                    cl_change = colorBadge.danger;
                    break;
                case (token.percent_change < 0):
                    cl_badge = colorBadge.danger;
                    cl_change = colorBadge.danger;
                    break;
                case (token.percent_change >= 50):
                    pump = true;
                    badgeText = "PUMP";
                    cl_card = colorCard.success;
                    cl_badge = colorBadge.warning;
                    break;
                case (token.percent_change >= 30):
                    pump = true;
                    badgeText = "PUMP";
                    cl_badge = colorBadge.success;
                    cl_change = colorBadge.success;
                    break;
                case (token.percent_change >= 0):
                    cl_change = colorBadge.success;
                    break;
                default:
                    break;
            }

            if (dump == true || pump == true) {
                $("#" + token.slug + " #tokenPill").html(badgeText);
                $("#" + token.slug + " #tokenPill").addClass("badge badge-pill float-right " + cl_badge);
                $("#" + token.slug + " #headerCard").addClass(cl_card);
            }
            if (token.percent_change > 0) {
                $("#" + token.slug + " #headerCard").css("background-color", "rgb(222, 254, 222)");
            } else {
                $("#" + token.slug + " #headerCard").css("background-color", "rgb(255, 236, 240)");

            }

            $("#" + token.slug + " #badgePchange").addClass(cl_change);

            if (!configScreener.onlineMode) {
                $("#" + token.slug + " #walletPrice_TokenStore").hide();
                $("#" + token.slug + " #walletPrice_Idex").hide();
            }

            if (configScreener.graphDisplay) {
                $("#" + token.output_zone + " .card-footer").css("display", "block");
            }
            // console.log(tokenName + " " + cl_change);
        }

        function info_CoinMarketCap_Global() {
            //console.log(cmc_urlAPIinformation+currency);
            var dateConvert = new Date();
            var cmcInfos;
            if (isTimeToGet(coolDown.cmc_global)) {
                console.log("Load CMC General Infos");
                // console.log("Get Last Visit : "+lastvisit + " ("+parseInt(minutes)+"min)");
                $.ajax({
                    url: cmc_urlAPIinformation + currency,
                    type: "GET",
                    dataType: 'json',
                    async: false,
                    //crossDomain: true,
                    success: function(data) {
                        //console.log(data);
                        cmcInfos = data;
                    }
                });
            } else {
                console.log("Read CMC General Infos");
                cmcInfos = JSON.parse(localStorage.getItem('cs_CMCinfos'));
                dateConvert = convertDate(cmcInfos.last_updated);
            }
            // console.log(cmcInfos["total_market_cap_" + currency.toLowerCase()]);
            // $("#lastupdate").html(dateConvert);
            // $("#gl_MC").html(cmcInfos["total_market_cap_" + currency.toLowerCase()], 4);
            $("#gl_MC").html(currencySym + nFormatter(cmcInfos["total_market_cap_" + currency.toLowerCase()], 4));
            $("#gl_Vol").html(currencySym + nFormatter(cmcInfos["total_24h_volume_" + currency.toLowerCase()], 4));


            if (cmcInfos["total_24h_volume_" + currency.toLowerCase()] < 10000000000) {
                $("#bt_glVol").addClass("btn-danger");
                // $("#bt_glVol").css("color", "white");
            } else if (cmcInfos["total_24h_volume_" + currency.toLowerCase()] >= 10000000000 && cmcInfos["total_24h_volume_" + currency.toLowerCase()] <= 20000000000) {
                $("#bt_glVol").addClass("btn-danger");
            } else if (cmcInfos["total_24h_volume_" + currency.toLowerCase()] >= 30000000000 && cmcInfos["total_24h_volume_" + currency.toLowerCase()] < 35000000000) {
                $("#bt_glVol").addClass("btn-success");
            } else if (cmcInfos["total_24h_volume_" + currency.toLowerCase()] >= 35000000000) {
                $("#bt_glVol").addClass("btn-success");
                // $("#bt_glVol").css("color", "white");
            }

            // $("#gl_MC").html(nFormatter(cmcInfos.total_market_cap_eur, 4)); 282843326504
            if (cmcInfos["total_market_cap_" + currency.toLowerCase()] < 100000000000) {
                $("#bt_glMC").addClass("btn-danger");
                // $("#bt_glMC").css("color", "white");
            } else if (cmcInfos["total_market_cap_" + currency.toLowerCase()] >= 100000000000 && cmcInfos["total_market_cap_" + currency.toLowerCase()] <= 200000000000) {
                // $("#cmc_mc").css("background-color", "green");
                $("#bt_glMC").addClass("btn-danger");
            } else if (cmcInfos["total_market_cap_" + currency.toLowerCase()] >= 300000000000 && cmcInfos["total_market_cap_" + currency.toLowerCase()] < 350000000000) {
                // $("#cmc_mc").css("background-color", "green");
                $("#bt_glMC").addClass("btn-success");
            } else if (cmcInfos["total_market_cap_" + currency.toLowerCase()] >= 350000000000) {
                // $("#bt_glMC").css("background-color", "green");
                $("#bt_glMC").addClass("btn-success");
            }


            // $("#curr_symb1").html(currencySym);
            // $("#curr_symb2").html(currencySym);
            // $("#curr_symb3").html(currencySym);



            if (cmcInfos.bitcoin_percentage_of_market_cap > 50) {
                $("#bt_glBTCDom").addClass("btn-danger");
            } else {
                $("#bt_glBTCDom").addClass("btn-success");
            }

            $("#gl_BTCdom").html(cmcInfos.bitcoin_percentage_of_market_cap + "%");

            // var dateConvert = convertDate(cmcInfos.last_updated);


        }

        function changeWalletBalance() {
            walletBalances.EUR = walletBalance;
            var last_walletBalances;
            if (localStorage.getItem("cs_balances") === null) {
                localStorage.setItem('cs_balances', JSON.stringify(walletBalances));
            } else {
                last_walletBalances = JSON.parse(localStorage.getItem("cs_balances"));
                gain_loss = walletBalance - parseFloat(last_walletBalances.EUR);
            }

            // console.log("wall: "+ walletBalance +" | last: " + last_walletBalances.EUR + " | g/l: " + gain_loss);
        }

        function eventsCryptoScreener() {
            $(".dropdown").on("show.bs.dropdown", function(event) {
                var idChoice = $(event.relatedTarget).attr('id'); // Get the text of the element
                var textChoice = $(event.relatedTarget).text(); // Get the text of the element
                if (idChoice == "currencyChoice") {
                    //$(event.relatedTarget).text("toto");
                }
                // console.log(textChoice);
                //$(event.relatedTarget).text("toto");
                // alert(x);
            });

            $(".dropdown-menu a").click(function() {
                // console.log($(this).parent().attr('id'));
                if ($(this).parent().attr('id') == "currencyChoice") {
                    var selCurrency = $(this).text();
                    $("#currencyChoice").text(selCurrency);
                    $(".dropdown-item").removeClass("active");
                    $("#curr" + selCurrency).addClass("active");
                    changeCurrency(selCurrency);
                }
                if ($(this).parent().attr('id') == "dd_Help") {
                    var selectionAide = $(this).text();
                    //console.log(selectionAide);
                    if (selectionAide == "Installation") {
                        $("#help_body").html(modal_installation);
                        $("#help_body").append("<hr>");
                        $.each(_history, function(ver, history) {
                            $("#help_body").append("<span class='small'><b>v" + ver + ":</b> " + history + "</span><br>");
                        });
                    } else if (selectionAide == "FAQ") {
                        $("#help_body").html(modal_faq);
                    }
                }
            });

            $(".form-check-input").change(function() {
                var choiceButton = $(this).parent().text();
                if (choiceButton == "Mode Online") {
                    configScreener.onlineMode = $(this).prop("checked");
                    if (configScreener.onlineMode) {
                        $("#modeCS").text("online");
                        $("#modeCS").removeClass("badge-danger");
                        $("#modeCS").addClass("badge-success");
                    } else {
                        $("#modeCS").text("offline");
                        $("#modeCS").removeClass("badge-success");
                        $("#modeCS").addClass("badge-danger");
                    }
                    clean_AllCards();
                    logInfo("Change: Mode " + $("#modeCS").text());
                }

                if (choiceButton == "Wallet Local") {
                    configScreener.localWallet = $(this).prop("checked");
                    smallListCoins = [];
                    smallListTokens = [];
                    walletBalance = 0;
                    get_LocalWallet();
                    if (configScreener.localWallet) {
                        read_walletETH_DeltaBalances(configScreener.walletName);
                    }
                    clean_AllCards();
                    verifyBalances();
                }
                if (choiceButton == "Graphiques") {
                    configScreener.graphDisplay = $(this).prop("checked");
                    clean_AllCards();
                }
                // Gestion des Tris des tokens
                if (choiceButton == "Rank" || choiceButton == "Balance" || choiceButton == "24H") {
                    indexOrder = "DESC";
                    if (choiceButton == "Rank") {
                        indexOrder = "ASC";
                    }

                    smallListCoins = sortTokens(smallListCoins, choiceButton.toLowerCase(), indexOrder);
                    smallListTokens = sortTokens(smallListTokens, choiceButton.toLowerCase(), indexOrder);

                    configScreener.viewOrder = choiceButton;

                    clean_AllCards();
                }

                $('#dd_Options').dropdown("toggle");
                localStorage.setItem('cs_configuration', JSON.stringify(configScreener));
                //console.log(choiceButton);
            });

            // Validation de l'adresse ethereum dans les options :
            $('#input_addEth').keypress(function(event) {
                var keycode = (event.keyCode ? event.keyCode : event.which);
                if (keycode == '13') {
                    alert("Sauvegarde de votre adresse Ethereum");
                    $('#dd_Options').dropdown("toggle");
                    walletAddress.ETH = $('#input_addEth').val();
                    logInfo("Set new ETH address");
                    localStorage.setItem('cs_wallets', JSON.stringify(walletAddress));

                    // Create Dynamic link to Eth Wallet Explorer
                    $("#Etherscan").attr("href", all_ExternalLinks.Etherscan + walletAddress.ETH);
                    $("#Ethplorer").attr("href", all_ExternalLinks.Ethplorer + walletAddress.ETH);
                    $("#DeltaBalances").attr("href", all_ExternalLinks.DeltaBalances + walletAddress.ETH);
                }
            });

        }

        function majCryptoScreener() {
            $("#alert_msg").html("<strong>Attention !</strong> Mise à jour en cours.....");
            $("#alertRubbon").addClass("alert alert-info alert-dismissible fade show");
            var ready = false;
            var last_configScreener = JSON.parse(localStorage.getItem('cs_configuration'));
            console.log("MAJ CryptoScreener v" + last_configScreener.version + " to v" + configScreener.version);
            //console.log("Initialisation Variables Session" + configScreener.version);
            $.each(last_configScreener, function(element) {
                if (element != "version") {
                    configScreener[element] = last_configScreener[element];
                }
                //console.log("Maj: " + element + " = " + last_configScreener[element]);
            });
            localStorage.setItem('cs_configuration', JSON.stringify(configScreener));
        }

        function verifyCryptoSCreener() {

        }

        function infoCryptoScreener() {

        }

        function logInfo(message, header) {
            if (header === undefined) {
                console.log(message);
                //$("#all_Wallets").html(message);
            } else {
                console.log(header + ": " + message);
                $("#all_Wallets").html(header + ": " + message);
            }
        }

        function clean_AllCards() {
            $("#lstCoins").html("");
            $("#lstTokens").html("");
            makeCard();
        }
    </script>
</body>

</html>